(function(c){var a,b;b=typeof window!=="undefined"&&window!==null?window:global;b.Novelist=a=(function(){function d(){this.show=function(){var i=c(this.elem),j=this.options,e,g,h,f=c("<img/>");if(!i.data("novelist")){i.data("novelist",{currentWidth:(i).outerWidth(),currentHeight:(i).outerHeight(),limit:j.maxCharacters});if(j.backgroundImage){h=j.backgroundImage;f.load(function(){if(j.backgroundScale){i.css("backgroundSize",i.data("novelist").currentWidth+"px "+i.data("novelist").currentHeight+"px");g=i.data("novelist").currentWidth}else{g=this.width}e()});f.attr("src",h)}else{h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABLAAAASwCAMAAADc/0P9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowOTRGQzE3OTEwRDAxMUUyOUM4OEY0MTkyNDg4MEU5RiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowOTRGQzE3QTEwRDAxMUUyOUM4OEY0MTkyNDg4MEU5RiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA5NEZDMTc3MTBEMDExRTI5Qzg4RjQxOTI0ODgwRTlGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA5NEZDMTc4MTBEMDExRTI5Qzg4RjQxOTI0ODgwRTlGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+QK/yXwAAAAZQTFRF8/PzAAAArSZBvAAABY9JREFUeNrswTEBAAAAwqD1T+1pCaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4CaAAAMA/usAAWqGph8AAAAASUVORK5CYII=";g=1200}if(j.backgroundScale){i.css("backgroundRepeat","no-repeat")}else{i.css("backgroundRepeat",(j.direction=="vertical")?"repeat-x":"repeat-y")}i.css("backgroundImage","url('"+h+"')");e=function(){var k,l,n,m;k=i.val().length;l=(k/j.maxCharacters)*100;if(j.direction=="vertical"){m=i.data("novelist").currentHeight-((l/100)*i.data("novelist").currentHeight);i.css("backgroundPosition","left "+m+"px")}else{n=i.data("novelist").currentWidth-((l/100)*i.data("novelist").currentWidth);n+=-i.data("novelist").currentWidth+g;i.css("backgroundPosition","-"+n+"px top")}return Math.floor(l)};e();i.mouseup(function(){i.data("novelist").currentWidth=i.outerWidth();i.data("novelist").currentHeight=i.outerHeight();if(j.backgroundScale){i.css("backgroundSize",i.data("novelist").currentWidth+"px "+i.data("novelist").currentHeight+"px");g=i.data("novelist").currentWidth}e()});i.keyup(function(m){var l,k=i.val().length;if(k>=j.maxCharacters){k=j.maxCharacters;if(j.hardLimit){i.val(i.val().substr(0,j.maxCharacters))}j.onLimitReached.call(this,i.val())}l=e();j.onInput.call(this,i.val(),k,l,j.maxCharacters)})}};this.destroy=function(){var e=c(this.elem);e.removeData("novelist");e.off("mouseup","keyup")}}d.prototype.init=function(g,h){var f,e;f=this;f.elem=h;e=c(h).data("max-characters");g=g||{};if((g.maxCharacters===undefined)&&e){g.maxCharacters=e}return f.options=c.extend({},c.fn.novelist.defaults,g)};return d})();c.fn.novelist=function(e,d){return this.each(function(){var f=new a();if(f.hasOwnProperty(e)){f.init(d,this);return f[e]()}else{if(typeof e==="object"||!e){d=e;f.init(d,this);return f.show()}else{c.error("Method "+e+" does not exist on jQuery.novelist")}}})};return c.fn.novelist.defaults={maxCharacters:100,hardLimit:true,backgroundImage:"",backgroundScale:false,direction:"vertical",onInput:function(g,d,f,e){},onLimitReached:function(d){}}})(jQuery);